<!DOCTYPE html>
<html>
<head>
    <title>Smart Complaint System - рд╕реНрдорд╛рд░реНрдЯ рд╢рд┐рдХрд╛рдпрдд рдкреНрд░рдгрд╛рд▓реА</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

<div class="hero-section">
    <div class="slogan-banner">
        <marquee scrollamount="8">
            ЁЯПЫя╕П "рд╕реНрд╡рдЪреНрдЫ рднрд╛рд░рдд, рд╕реНрд╡рд╕реНрде рднрд╛рд░рдд" | "Clean India, Green India" | ЁЯЪо "рдХрдЪрд░рд╛ рдореБрдХреНрддрд┐, рджреЗрд╢ рдХреА рд╢реНрд░реЗрд╖реНрдарддрд╛" | "Waste Free Nation, Proud Nation" | ЁЯМ┐ "рд╕рдлрд╛рдИ рдХреЛ рд╕рдореНрдорд╛рди, рджреЗрд╢ рдХреЛ рдЖрдирдВрдж"
        </marquee>
    </div>
    
    <div class="language-toggle">
        <button onclick="setLanguage('en')" id="btn-en" class="lang-btn active">ЁЯЗ║ЁЯЗ╕ English</button>
        <button onclick="setLanguage('hi')" id="btn-hi" class="lang-btn">ЁЯЗоЁЯЗ│ рд╣рд┐рдВрджреА</button>
    </div>

    <div class="container">
        <div class="logo-section">
            <i class="fas fa-building-columns logo-icon"></i>
            <h1 id="main-title">Smart Complaint System</h1>
            <h2 id="sub-title">рд╕реНрдорд╛рд░реНрдЯ рд╢рд┐рдХрд╛рдпрдд рдкреНрд░рдгрд╛рд▓реА</h2>
        </div>

        <div class="govt-badge">
            <i class="fas fa-indian-rupee-sign"></i>
            <span id="govt-text">Government of India Initiative</span>
            <span id="govt-text-hi">рднрд╛рд░рдд рд╕рд░рдХрд╛рд░ рдХреА рдкрд╣рд▓</span>
        </div>

        <form action="/submit" method="POST" class="complaint-form">
            <div class="form-group">
                <label id="name-label"><i class="fas fa-user"></i> Your Name / рдЖрдкрдХрд╛ рдирд╛рдо</label>
                <input type="text" name="name" id="name-input" placeholder="Enter your name / рдЕрдкрдирд╛ рдирд╛рдо рджрд░реНрдЬ рдХрд░реЗрдВ" required>
            </div>

            <div class="form-group">
                <label id="location-label"><i class="fas fa-map-marker-alt"></i> Location / рд╕реНрдерд╛рди</label>
                <input type="text" name="location" id="location-input" placeholder="Enter location / рд╕реНрдерд╛рди рджрд░реНрдЬ рдХрд░реЗрдВ" required>
            </div>

            <div class="form-group">
                <label id="complaint-label"><i class="fas fa-comment-dots"></i> Your Complaint / рдЖрдкрдХреА рд╢рд┐рдХрд╛рдпрдд</label>
                <div class="textarea-wrapper">
                    <textarea name="complaint" id="complaint-input" placeholder="Describe your complaint... / рдЕрдкрдиреА рд╢рд┐рдХрд╛рдпрдд рдХрд╛ рд╡рд░реНрдгрди рдХрд░реЗрдВ..." required></textarea>
                    <button type="button" class="voice-btn" onclick="startVoiceInput()" title="Voice Input / рдЖрд╡рд╛рдЬрд╝ рд╕реЗ рджрд░реНрдЬ рдХрд░реЗрдВ">
                        <i class="fas fa-microphone"></i>
                    </button>
                </div>
                <div id="voice-status" class="voice-status"></div>
            </div>

            <button type="submit" class="submit-btn" id="submit-btn">
                <i class="fas fa-paper-plane"></i>
                <span id="submit-text">Submit Complaint</span>
                <span id="submit-text-hi">рд╢рд┐рдХрд╛рдпрдд рдЬрдорд╛ рдХрд░реЗрдВ</span>
            </button>
        </form>

        <div class="track-link">
            <a href="/track" id="track-link">
                <i class="fas fa-search-location"></i>
                <span id="track-text">Track Your Complaint</span>
                <span id="track-text-hi">рдЕрдкрдиреА рд╢рд┐рдХрд╛рдпрдд рдХреЛ рдЯреНрд░реИрдХ рдХрд░реЗрдВ</span>
            </a>
        </div>

        <div class="features-section">
            <div class="feature-card">
                <i class="fas fa-microphone-alt"></i>
                <span id="feature-voice">Voice Input</span>
                <span id="feature-voice-hi">рдЖрд╡рд╛рдЬрд╝ рд╕реЗ рдЗрдирдкреБрдЯ</span>
            </div>
            <div class="feature-card">
                <i class="fas fa-language"></i>
                <span id="feature-lang">Bilingual</span>
                <span id="feature-lang-hi">рджреНрд╡рд┐рднрд╛рд╖реА</span>
            </div>
            <div class="feature-card">
                <i class="fas fa-bolt"></i>
                <span id="feature-fast">Fast Response</span>
                <span id="feature-fast-hi">рддреНрд╡рд░рд┐рдд рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛</span>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>ЁЯПЫя╕П Smart Complaint System | рд╕реНрдорд╛рд░реНрдЯ рд╢рд┐рдХрд╛рдпрдд рдкреНрд░рдгрд╛рд▓реА | Government Waste Monitoring Initiative</p>
    </footer>
</div>

<script src="{{ url_for('static', filename='script.js') }}"></script>
<script>
    // Language translations
    const translations = {
        en: {
            title: "Smart Complaint System",
            subtitle: "Government of India Initiative",
            namePlaceholder: "Enter your name",
            locationPlaceholder: "Enter location",
            complaintPlaceholder: "Describe your complaint...",
            submit: "Submit Complaint",
            track: "Track Your Complaint",
            voiceStart: "Click to speak...",
            voiceListening: "Listening...",
            voiceError: "Voice not supported",
            features: ["Voice Input", "Bilingual", "Fast Response"]
        },
        hi: {
            title: "рд╕реНрдорд╛рд░реНрдЯ рд╢рд┐рдХрд╛рдпрдд рдкреНрд░рдгрд╛рд▓реА",
            subtitle: "рднрд╛рд░рдд рд╕рд░рдХрд╛рд░ рдХреА рдкрд╣рд▓",
            namePlaceholder: "рдЕрдкрдирд╛ рдирд╛рдо рджрд░реНрдЬ рдХрд░реЗрдВ",
            locationPlaceholder: "рд╕реНрдерд╛рди рджрд░реНрдЬ рдХрд░реЗрдВ",
            complaintPlaceholder: "рдЕрдкрдиреА рд╢рд┐рдХрд╛рдпрдд рдХрд╛ рд╡рд░реНрдгрди рдХрд░реЗрдВ...",
            submit: "рд╢рд┐рдХрд╛рдпрдд рдЬрдорд╛ рдХрд░реЗрдВ",
            track: "рдЕрдкрдиреА рд╢рд┐рдХрд╛рдпрдд рдХреЛ рдЯреНрд░реИрдХ рдХрд░реЗрдВ",
            voiceStart: "рдмреЛрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ...",
            voiceListening: "рд╕реБрди рд░рд╣реЗ рд╣реИрдВ...",
            voiceError: "рдЖрд╡рд╛рдЬрд╝ рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реИ",
            features: ["рдЖрд╡рд╛рдЬрд╝ рд╕реЗ рдЗрдирдкреБрдЯ", "рджреНрд╡рд┐рднрд╛рд╖реА", "рддреНрд╡рд░рд┐рдд рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛"]
        }
    };

    let currentLang = '{{ lang }}' || 'en';

    function setLanguage(lang) {
        currentLang = lang;
        document.getElementById('btn-en').classList.toggle('active', lang === 'en');
        document.getElementById('btn-hi').classList.toggle('active', lang === 'hi');
        
        // Update placeholders
        document.getElementById('name-input').placeholder = translations[lang].namePlaceholder + (lang === 'hi' ? "" : "");
        document.getElementById('location-input').placeholder = translations[lang].locationPlaceholder + (lang === 'hi' ? "" : "");
        document.getElementById('complaint-input').placeholder = translations[lang].complaintPlaceholder;
        
        // Show/hide Hindi elements
        const hiElements = document.querySelectorAll('[id$="-hi"]');
        hiElements.forEach(el => {
            el.style.display = lang === 'hi' ? 'inline' : 'none';
        });
        
        // Save language preference
        fetch('/set_language/' + lang);
    }

    function startVoiceInput() {
        const statusEl = document.getElementById('voice-status');
        
        if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
            statusEl.innerHTML = '<span class="error">' + translations[currentLang].voiceError + '</span>';
            return;
        }

        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new SpeechRecognition();
        
        recognition.lang = currentLang === 'hi' ? 'hi-IN' : 'en-US';
        recognition.interimResults = false;
        recognition.maxAlternatives = 1;

        statusEl.innerHTML = '<span class="listening">' + translations[currentLang].voiceListening + '</span>';

        recognition.start();

        recognition.onresult = function(event) {
            const transcript = event.results[0][0].transcript;
            document.getElementById('complaint-input').value = transcript;
            statusEl.innerHTML = '<span class="success"><i class="fas fa-check"></i> ' + transcript + '</span>';
        };

        recognition.onerror = function(event) {
            statusEl.innerHTML = '<span class="error">' + translations[currentLang].voiceError + '</span>';
        };

        recognition.onend = function() {
            setTimeout(() => {
                statusEl.innerHTML = '';
            }, 3000);
        };
    }

    // Initialize language
    document.addEventListener('DOMContentLoaded', function() {
        setLanguage(currentLang);
    });
</script>

</body>
</html>
